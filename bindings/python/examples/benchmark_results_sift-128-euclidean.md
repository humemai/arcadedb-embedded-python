# Benchmark Results

This benchmark compares ArcadeDB's vector index implementations (JVector vs HNSWLib) across multiple dataset sizes and index parameters.

## Dataset Information

**1. SIFT-128-Euclidean (`sift-128-euclidean.hdf5`)**

- **File Size:** 501 MB
- **Total Vectors:** 1,000,000 (1 Million)
- **Dimensions:** 128
- **Test Queries:** 10,000

* **Name**: sift-128-euclidean
* **Source**: http://ann-benchmarks.com/sift-128-euclidean.hdf5
* **Metric**: Euclidean
* **K Values**: [10, 50, 100]

## Targets & Use Cases

| k      | Recall target | Hit target | Use case                   |
| ------ | ------------- | ---------- | -------------------------- |
| 10     | 0.85–0.95     | 0.90–0.95  | Small corpora only         |
| **50** | **≥ 0.95**    | **≥ 0.99** | **Default RAG**            |
| 100    | 0.90–0.93     | ≈ 1.0      | Very large / noisy corpora |

As k increases, Recall@k can go down — but Hit@k must go up.

**Note:**

- **Parameter Semantics**: `m` and `ef` are not exactly equivalent between implementations:
  - **JVector**: `m` -> `max_connections`, `ef` -> `beam_width`.
  - **HNSWLib**: `m` -> `m`, `ef` -> `ef`.
- **HNSWLib**: `ef_construction` is fixed at 200. `ef` controls search recall/speed dynamically.
- **Metric Equations**:
  - **Euclidean (JVector)**: Similarity = $1 / (1 + d^2)$ (Higher is better)
  - **Euclidean (HNSWLib)**: Distance = $d^2$ (Lower is better)
  - **Cosine (JVector)**: Distance = $(1 - \cos(\theta)) / 2$ (Lower is better)
  - **Cosine (HNSWLib)**: Distance = $1 - \cos(\theta)$ (Lower is better)

## Scenario: Tiny

- **Dimensions**: 128
- **Vector Count**: 1000
- **Queries**: 10
- **Data Load Time**: 0.0016s
- **Ground Truth Time**: 0.0007s
- **DB Setup Time**: 1.3503s

### k = 10

| m   | ef  | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) |
| --- | --- | ------------------ | ------------------ | ----------- | ----------- | ---------- | ---------- | --------- | --------- |
| 8   | 32  | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.3169     | 1.8548     | 7.77±3.01 | 4.46±0.62 |
| 8   | 64  | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.1225     | 1.0613     | 3.40±1.22 | 2.61±0.55 |
| 8   | 128 | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.1518     | 1.1056     | 2.11±0.44 | 2.10±0.13 |
| 16  | 32  | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0554     | 0.8883     | 1.57±0.26 | 2.29±0.13 |
| 16  | 64  | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0425     | 0.9209     | 2.58±1.03 | 2.40±0.27 |
| 16  | 128 | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0445     | 0.9954     | 1.97±0.35 | 2.94±0.39 |
| 32  | 32  | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0328     | 1.2281     | 2.36±0.22 | 2.28±0.20 |
| 32  | 64  | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0328     | 0.8629     | 2.06±0.18 | 1.91±0.48 |
| 32  | 128 | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0380     | 0.8197     | 2.32±0.21 | 1.94±0.31 |

### k = 50

| m   | ef  | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) |
| --- | --- | ------------------ | ------------------ | ----------- | ----------- | ---------- | ---------- | --------- | --------- |
| 8   | 32  | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.3169     | 1.8548     | 7.77±3.01 | 4.46±0.62 |
| 8   | 64  | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.1225     | 1.0613     | 3.40±1.22 | 2.61±0.55 |
| 8   | 128 | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.1518     | 1.1056     | 2.11±0.44 | 2.10±0.13 |
| 16  | 32  | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0554     | 0.8883     | 1.57±0.26 | 2.29±0.13 |
| 16  | 64  | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0425     | 0.9209     | 2.58±1.03 | 2.40±0.27 |
| 16  | 128 | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0445     | 0.9954     | 1.97±0.35 | 2.94±0.39 |
| 32  | 32  | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0328     | 1.2281     | 2.36±0.22 | 2.28±0.20 |
| 32  | 64  | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0328     | 0.8629     | 2.06±0.18 | 1.91±0.48 |
| 32  | 128 | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0380     | 0.8197     | 2.32±0.21 | 1.94±0.31 |

### k = 100

| m   | ef  | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) |
| --- | --- | ------------------ | ------------------ | ----------- | ----------- | ---------- | ---------- | --------- | --------- |
| 8   | 32  | 0.9940±0.0080      | 0.9980±0.0060      | 1.0000      | 1.0000      | 0.3169     | 1.8548     | 7.77±3.01 | 4.46±0.62 |
| 8   | 64  | 0.9930±0.0064      | 0.9980±0.0060      | 1.0000      | 1.0000      | 0.1225     | 1.0613     | 3.40±1.22 | 2.61±0.55 |
| 8   | 128 | 0.9940±0.0066      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.1518     | 1.1056     | 2.11±0.44 | 2.10±0.13 |
| 16  | 32  | 0.9990±0.0030      | 0.9990±0.0030      | 1.0000      | 1.0000      | 0.0554     | 0.8883     | 1.57±0.26 | 2.29±0.13 |
| 16  | 64  | 1.0000±0.0000      | 0.9990±0.0030      | 1.0000      | 1.0000      | 0.0425     | 0.9209     | 2.58±1.03 | 2.40±0.27 |
| 16  | 128 | 0.9990±0.0030      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0445     | 0.9954     | 1.97±0.35 | 2.94±0.39 |
| 32  | 32  | 1.0000±0.0000      | 0.9990±0.0030      | 1.0000      | 1.0000      | 0.0328     | 1.2281     | 2.36±0.22 | 2.28±0.20 |
| 32  | 64  | 1.0000±0.0000      | 0.9990±0.0030      | 1.0000      | 1.0000      | 0.0328     | 0.8629     | 2.06±0.18 | 1.91±0.48 |
| 32  | 128 | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.0380     | 0.8197     | 2.32±0.21 | 1.94±0.31 |

## Scenario: Small

- **Dimensions**: 128
- **Vector Count**: 10000
- **Queries**: 100
- **Data Load Time**: 0.0050s
- **Ground Truth Time**: 0.0428s
- **DB Setup Time**: 1.2323s

### k = 10

| m   | ef  | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) |
| --- | --- | ------------------ | ------------------ | ----------- | ----------- | ---------- | ---------- | --------- | --------- |
| 8   | 32  | 0.9800±0.0469      | 0.9980±0.0199      | 1.0000      | 1.0000      | 0.2858     | 37.7028    | 1.84±0.39 | 4.10±1.63 |
| 8   | 64  | 0.9850±0.0456      | 0.9980±0.0199      | 1.0000      | 1.0000      | 0.4191     | 33.2927    | 2.47±0.69 | 3.07±0.80 |
| 8   | 128 | 0.9870±0.0365      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.2002     | 32.0312    | 1.50±0.45 | 4.80±0.96 |
| 16  | 32  | 0.9980±0.0140      | 0.9980±0.0199      | 1.0000      | 1.0000      | 0.2428     | 27.7058    | 2.48±0.48 | 4.04±1.21 |
| 16  | 64  | 1.0000±0.0000      | 0.9980±0.0199      | 1.0000      | 1.0000      | 0.2384     | 28.0220    | 2.19±0.35 | 3.06±0.82 |
| 16  | 128 | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.2934     | 28.3784    | 2.53±0.48 | 3.61±0.85 |
| 32  | 32  | 1.0000±0.0000      | 0.9980±0.0199      | 1.0000      | 1.0000      | 0.2064     | 23.1465    | 2.48±0.50 | 2.98±0.97 |
| 32  | 64  | 1.0000±0.0000      | 0.9980±0.0199      | 1.0000      | 1.0000      | 0.3013     | 23.1871    | 2.92±0.71 | 2.73±0.58 |
| 32  | 128 | 1.0000±0.0000      | 1.0000±0.0000      | 1.0000      | 1.0000      | 0.5401     | 23.7501    | 3.23±0.91 | 3.81±0.88 |

### k = 50

| m   | ef  | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) |
| --- | --- | ------------------ | ------------------ | ----------- | ----------- | ---------- | ---------- | --------- | --------- |
| 8   | 32  | 0.9602±0.0506      | 0.9948±0.0115      | 1.0000      | 1.0000      | 0.2858     | 37.7028    | 1.84±0.39 | 4.10±1.63 |
| 8   | 64  | 0.9688±0.0400      | 0.9948±0.0115      | 1.0000      | 1.0000      | 0.4191     | 33.2927    | 2.47±0.69 | 3.07±0.80 |
| 8   | 128 | 0.9742±0.0381      | 0.9984±0.0054      | 1.0000      | 1.0000      | 0.2002     | 32.0312    | 1.50±0.45 | 4.80±0.96 |
| 16  | 32  | 0.9946±0.0132      | 0.9982±0.0064      | 1.0000      | 1.0000      | 0.2428     | 27.7058    | 2.48±0.48 | 4.04±1.21 |
| 16  | 64  | 0.9970±0.0091      | 0.9982±0.0064      | 1.0000      | 1.0000      | 0.2384     | 28.0220    | 2.19±0.35 | 3.06±0.82 |
| 16  | 128 | 0.9974±0.0078      | 0.9994±0.0034      | 1.0000      | 1.0000      | 0.2934     | 28.3784    | 2.53±0.48 | 3.61±0.85 |
| 32  | 32  | 0.9992±0.0048      | 0.9986±0.0058      | 1.0000      | 1.0000      | 0.2064     | 23.1465    | 2.48±0.50 | 2.98±0.97 |
| 32  | 64  | 0.9990±0.0044      | 0.9986±0.0058      | 1.0000      | 1.0000      | 0.3013     | 23.1871    | 2.92±0.71 | 2.73±0.58 |
| 32  | 128 | 0.9994±0.0034      | 0.9996±0.0028      | 1.0000      | 1.0000      | 0.5401     | 23.7501    | 3.23±0.91 | 3.81±0.88 |

### k = 100

| m   | ef  | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) |
| --- | --- | ------------------ | ------------------ | ----------- | ----------- | ---------- | ---------- | --------- | --------- |
| 8   | 32  | 0.9234±0.0581      | 0.9852±0.0181      | 1.0000      | 1.0000      | 0.2858     | 37.7028    | 1.84±0.39 | 4.10±1.63 |
| 8   | 64  | 0.9352±0.0485      | 0.9852±0.0181      | 1.0000      | 1.0000      | 0.4191     | 33.2927    | 2.47±0.69 | 3.07±0.80 |
| 8   | 128 | 0.9411±0.0447      | 0.9941±0.0092      | 1.0000      | 1.0000      | 0.2002     | 32.0312    | 1.50±0.45 | 4.80±0.96 |
| 16  | 32  | 0.9835±0.0202      | 0.9947±0.0094      | 1.0000      | 1.0000      | 0.2428     | 27.7058    | 2.48±0.48 | 4.04±1.21 |
| 16  | 64  | 0.9879±0.0143      | 0.9947±0.0094      | 1.0000      | 1.0000      | 0.2384     | 28.0220    | 2.19±0.35 | 3.06±0.82 |
| 16  | 128 | 0.9882±0.0149      | 0.9979±0.0043      | 1.0000      | 1.0000      | 0.2934     | 28.3784    | 2.53±0.48 | 3.61±0.85 |
| 32  | 32  | 0.9946±0.0089      | 0.9956±0.0083      | 1.0000      | 1.0000      | 0.2064     | 23.1465    | 2.48±0.50 | 2.98±0.97 |
| 32  | 64  | 0.9972±0.0058      | 0.9956±0.0083      | 1.0000      | 1.0000      | 0.3013     | 23.1871    | 2.92±0.71 | 2.73±0.58 |
| 32  | 128 | 0.9977±0.0058      | 0.9982±0.0038      | 1.0000      | 1.0000      | 0.5401     | 23.7501    | 3.23±0.91 | 3.81±0.88 |

## Scenario: Medium

- **Dimensions**: 128
- **Vector Count**: 100000
- **Queries**: 1000
- **Data Load Time**: 0.0240s
- **Ground Truth Time**: 1.1638s
- **DB Setup Time**: 17.1319s

### k = 10

| m   | ef  | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms)   |
| --- | --- | ------------------ | ------------------ | ----------- | ----------- | ---------- | ---------- | --------- | ----------- |
| 8   | 32  | 0.8674±0.1743      | 0.9876±0.0468      | 0.9990      | 1.0000      | 2.9602     | 666.3995   | 2.81±1.30 | 5.71±1.88   |
| 8   | 64  | 0.8994±0.1491      | 0.9876±0.0468      | 1.0000      | 1.0000      | 4.0696     | 690.5805   | 2.42±0.72 | 6.05±1.74   |
| 8   | 128 | 0.9144±0.1393      | 0.9919±0.0385      | 0.9990      | 1.0000      | 4.1189     | 695.8646   | 2.50±0.81 | 7.56±34.05  |
| 16  | 32  | 0.9778±0.0597      | 0.9971±0.0190      | 1.0000      | 1.0000      | 3.2643     | 921.8623   | 3.35±0.72 | 8.35±29.67  |
| 16  | 64  | 0.9866±0.0436      | 0.9971±0.0190      | 1.0000      | 1.0000      | 4.9920     | 908.6499   | 3.51±0.85 | 7.43±29.22  |
| 16  | 128 | 0.9898±0.0389      | 0.9985±0.0122      | 1.0000      | 1.0000      | 7.9182     | 930.3037   | 3.49±0.92 | 10.23±32.31 |
| 32  | 32  | 0.9939±0.0274      | 0.9985±0.0144      | 1.0000      | 1.0000      | 4.4230     | 649.1066   | 5.54±1.86 | 8.51±42.32  |
| 32  | 64  | 0.9971±0.0185      | 0.9985±0.0144      | 1.0000      | 1.0000      | 8.3024     | 621.8321   | 5.27±1.62 | 6.00±1.91   |
| 32  | 128 | 0.9975±0.0156      | 0.9987±0.0137      | 1.0000      | 1.0000      | 12.9705    | 573.8000   | 4.97±1.32 | 8.62±27.95  |

### k = 50

| m   | ef  | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms)   |
| --- | --- | ------------------ | ------------------ | ----------- | ----------- | ---------- | ---------- | --------- | ----------- |
| 8   | 32  | 0.8137±0.1502      | 0.9628±0.0470      | 1.0000      | 1.0000      | 2.9602     | 666.3995   | 2.81±1.30 | 5.71±1.88   |
| 8   | 64  | 0.8484±0.1310      | 0.9628±0.0470      | 1.0000      | 1.0000      | 4.0696     | 690.5805   | 2.42±0.72 | 6.05±1.74   |
| 8   | 128 | 0.8633±0.1217      | 0.9769±0.0346      | 0.9990      | 1.0000      | 4.1189     | 695.8646   | 2.50±0.81 | 7.56±34.05  |
| 16  | 32  | 0.9504±0.0600      | 0.9885±0.0214      | 1.0000      | 1.0000      | 3.2643     | 921.8623   | 3.35±0.72 | 8.35±29.67  |
| 16  | 64  | 0.9636±0.0490      | 0.9885±0.0214      | 1.0000      | 1.0000      | 4.9920     | 908.6499   | 3.51±0.85 | 7.43±29.22  |
| 16  | 128 | 0.9689±0.0415      | 0.9940±0.0140      | 1.0000      | 1.0000      | 7.9182     | 930.3037   | 3.49±0.92 | 10.23±32.31 |
| 32  | 32  | 0.9797±0.0331      | 0.9927±0.0159      | 1.0000      | 1.0000      | 4.4230     | 649.1066   | 5.54±1.86 | 8.51±42.32  |
| 32  | 64  | 0.9890±0.0202      | 0.9927±0.0159      | 1.0000      | 1.0000      | 8.3024     | 621.8321   | 5.27±1.62 | 6.00±1.91   |
| 32  | 128 | 0.9892±0.0218      | 0.9961±0.0106      | 1.0000      | 1.0000      | 12.9705    | 573.8000   | 4.97±1.32 | 8.62±27.95  |

### k = 100

| m   | ef  | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms)   |
| --- | --- | ------------------ | ------------------ | ----------- | ----------- | ---------- | ---------- | --------- | ----------- |
| 8   | 32  | 0.7635±0.1456      | 0.9336±0.0571      | 1.0000      | 1.0000      | 2.9602     | 666.3995   | 2.81±1.30 | 5.71±1.88   |
| 8   | 64  | 0.7957±0.1302      | 0.9336±0.0571      | 1.0000      | 1.0000      | 4.0696     | 690.5805   | 2.42±0.72 | 6.05±1.74   |
| 8   | 128 | 0.8110±0.1229      | 0.9562±0.0428      | 0.9990      | 1.0000      | 4.1189     | 695.8646   | 2.50±0.81 | 7.56±34.05  |
| 16  | 32  | 0.9183±0.0694      | 0.9745±0.0283      | 1.0000      | 1.0000      | 3.2643     | 921.8623   | 3.35±0.72 | 8.35±29.67  |
| 16  | 64  | 0.9363±0.0590      | 0.9745±0.0283      | 1.0000      | 1.0000      | 4.9920     | 908.6499   | 3.51±0.85 | 7.43±29.22  |
| 16  | 128 | 0.9427±0.0525      | 0.9858±0.0191      | 1.0000      | 1.0000      | 7.9182     | 930.3037   | 3.49±0.92 | 10.23±32.31 |
| 32  | 32  | 0.9610±0.0410      | 0.9831±0.0208      | 1.0000      | 1.0000      | 4.4230     | 649.1066   | 5.54±1.86 | 8.51±42.32  |
| 32  | 64  | 0.9758±0.0284      | 0.9831±0.0208      | 1.0000      | 1.0000      | 8.3024     | 621.8321   | 5.27±1.62 | 6.00±1.91   |
| 32  | 128 | 0.9764±0.0298      | 0.9907±0.0141      | 1.0000      | 1.0000      | 12.9705    | 573.8000   | 4.97±1.32 | 8.62±27.95  |
