# Benchmark Results

This benchmark compares ArcadeDB's vector index implementations (JVector vs HNSWLib) across multiple dataset sizes and index parameters.

## Dataset Information

**1. SIFT-128-Euclidean (`sift-128-euclidean.hdf5`)**
*   **File Size:** 501 MB
*   **Total Vectors:** 1,000,000 (1 Million)
*   **Dimensions:** 128
*   **Test Queries:** 10,000

- **Name**: sift-128-euclidean
- **Source**: http://ann-benchmarks.com/sift-128-euclidean.hdf5
- **Metric**: Euclidean
- **K Values**: [10, 50, 100]

## Targets & Use Cases

| k      | Recall target | Hit target | Use case                   |
| ------ | ------------- | ---------- | -------------------------- |
| 10     | 0.85–0.95     | 0.90–0.95  | Small corpora only         |
| **50** | **≥ 0.95**    | **≥ 0.99** | **Default RAG**            |
| 100    | 0.90–0.93     | ≈ 1.0      | Very large / noisy corpora |

As k increases, Recall@k can go down — but Hit@k must go up.

**Note:**
- **Parameter Semantics**: `m` and `ef` are not exactly equivalent between implementations:
  - **JVector**: `m` -> `max_connections`, `ef` -> `beam_width`.
  - **HNSWLib**: `m` -> `m`, `ef` -> `ef`.
- **HNSWLib**: `ef_construction` is fixed at 200. `ef` controls search recall/speed dynamically.
- **Metric Equations**:
  - **Euclidean (JVector)**: Similarity = $1 / (1 + d^2)$ (Higher is better)
  - **Euclidean (HNSWLib)**: Distance = $d^2$ (Lower is better)
  - **Cosine (JVector)**: Distance = $(1 - \cos(\theta)) / 2$ (Lower is better)
  - **Cosine (HNSWLib)**: Distance = $1 - \cos(\theta)$ (Lower is better)

## Scenario: Tiny

- **Dimensions**: 128
- **Vector Count**: 1000
- **Queries**: 10
- **Data Load Time**: 0.0032s
- **Ground Truth Time**: 0.0017s
- **DB Setup Time**: 0.9682s
- **Total Scenario Time**: 0.05 min (2.75s)

### k = 10

| m | ef | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) | J_Back(ms) | H_Back(ms) |
|---|---|---|---|---|---|---|---|---|---|---|---|
| 8 | 32 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.2927 | N/A | 10.79±8.80 | N/A | 9.37±8.49 | N/A |
| 8 | 64 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.1430 | N/A | 5.78±2.13 | N/A | 5.00±1.92 | N/A |
| 8 | 128 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.1783 | N/A | 4.81±1.77 | N/A | 3.46±1.74 | N/A |
| 16 | 32 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.0855 | N/A | 3.69±1.70 | N/A | 2.36±1.43 | N/A |
| 16 | 64 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.0710 | N/A | 4.39±1.30 | N/A | 3.66±1.31 | N/A |
| 16 | 128 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.0858 | N/A | 3.23±0.75 | N/A | 2.46±0.56 | N/A |
| 32 | 32 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.0470 | N/A | 2.82±0.33 | N/A | 2.21±0.31 | N/A |
| 32 | 64 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.0577 | N/A | 2.65±0.39 | N/A | 2.01±0.36 | N/A |
| 32 | 128 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.1110 | N/A | 4.27±2.55 | N/A | 3.28±1.64 | N/A |

### k = 50

| m | ef | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) | J_Back(ms) | H_Back(ms) |
|---|---|---|---|---|---|---|---|---|---|---|---|
| 8 | 32 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.2927 | N/A | 10.79±8.80 | N/A | 9.37±8.49 | N/A |
| 8 | 64 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.1430 | N/A | 5.78±2.13 | N/A | 5.00±1.92 | N/A |
| 8 | 128 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.1783 | N/A | 4.81±1.77 | N/A | 3.46±1.74 | N/A |
| 16 | 32 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.0855 | N/A | 3.69±1.70 | N/A | 2.36±1.43 | N/A |
| 16 | 64 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.0710 | N/A | 4.39±1.30 | N/A | 3.66±1.31 | N/A |
| 16 | 128 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.0858 | N/A | 3.23±0.75 | N/A | 2.46±0.56 | N/A |
| 32 | 32 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.0470 | N/A | 2.82±0.33 | N/A | 2.21±0.31 | N/A |
| 32 | 64 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.0577 | N/A | 2.65±0.39 | N/A | 2.01±0.36 | N/A |
| 32 | 128 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.1110 | N/A | 4.27±2.55 | N/A | 3.28±1.64 | N/A |

### k = 100

| m | ef | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) | J_Back(ms) | H_Back(ms) |
|---|---|---|---|---|---|---|---|---|---|---|---|
| 8 | 32 | 0.9930±0.0100 | N/A | 1.0000 | N/A | 0.2927 | N/A | 10.79±8.80 | N/A | 9.37±8.49 | N/A |
| 8 | 64 | 0.9950±0.0050 | N/A | 1.0000 | N/A | 0.1430 | N/A | 5.78±2.13 | N/A | 5.00±1.92 | N/A |
| 8 | 128 | 0.9950±0.0067 | N/A | 1.0000 | N/A | 0.1783 | N/A | 4.81±1.77 | N/A | 3.46±1.74 | N/A |
| 16 | 32 | 0.9990±0.0030 | N/A | 1.0000 | N/A | 0.0855 | N/A | 3.69±1.70 | N/A | 2.36±1.43 | N/A |
| 16 | 64 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.0710 | N/A | 4.39±1.30 | N/A | 3.66±1.31 | N/A |
| 16 | 128 | 0.9990±0.0030 | N/A | 1.0000 | N/A | 0.0858 | N/A | 3.23±0.75 | N/A | 2.46±0.56 | N/A |
| 32 | 32 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.0470 | N/A | 2.82±0.33 | N/A | 2.21±0.31 | N/A |
| 32 | 64 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.0577 | N/A | 2.65±0.39 | N/A | 2.01±0.36 | N/A |
| 32 | 128 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.1110 | N/A | 4.27±2.55 | N/A | 3.28±1.64 | N/A |


## Scenario: Small

- **Dimensions**: 128
- **Vector Count**: 10000
- **Queries**: 100
- **Data Load Time**: 0.0064s
- **Ground Truth Time**: 0.0677s
- **DB Setup Time**: 1.4336s
- **Total Scenario Time**: 0.14 min (8.55s)

### k = 10

| m | ef | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) | J_Back(ms) | H_Back(ms) |
|---|---|---|---|---|---|---|---|---|---|---|---|
| 8 | 32 | 0.9880±0.0475 | N/A | 1.0000 | N/A | 0.4704 | N/A | 2.66±0.74 | N/A | 2.06±0.67 | N/A |
| 8 | 64 | 0.9870±0.0503 | N/A | 1.0000 | N/A | 0.2520 | N/A | 2.30±0.46 | N/A | 1.75±0.42 | N/A |
| 8 | 128 | 0.9890±0.0397 | N/A | 1.0000 | N/A | 0.3092 | N/A | 3.21±1.19 | N/A | 2.58±1.14 | N/A |
| 16 | 32 | 0.9990±0.0099 | N/A | 1.0000 | N/A | 0.2589 | N/A | 4.01±0.90 | N/A | 3.29±0.78 | N/A |
| 16 | 64 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.4527 | N/A | 4.11±15.35 | N/A | 3.59±15.34 | N/A |
| 16 | 128 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.3602 | N/A | 2.97±0.48 | N/A | 2.31±0.41 | N/A |
| 32 | 32 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.2491 | N/A | 3.28±1.13 | N/A | 2.77±1.04 | N/A |
| 32 | 64 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.4409 | N/A | 5.22±14.13 | N/A | 4.64±14.12 | N/A |
| 32 | 128 | 1.0000±0.0000 | N/A | 1.0000 | N/A | 0.5807 | N/A | 3.38±0.99 | N/A | 2.84±0.92 | N/A |

### k = 50

| m | ef | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) | J_Back(ms) | H_Back(ms) |
|---|---|---|---|---|---|---|---|---|---|---|---|
| 8 | 32 | 0.9584±0.0490 | N/A | 1.0000 | N/A | 0.4704 | N/A | 2.66±0.74 | N/A | 2.06±0.67 | N/A |
| 8 | 64 | 0.9738±0.0356 | N/A | 1.0000 | N/A | 0.2520 | N/A | 2.30±0.46 | N/A | 1.75±0.42 | N/A |
| 8 | 128 | 0.9730±0.0387 | N/A | 1.0000 | N/A | 0.3092 | N/A | 3.21±1.19 | N/A | 2.58±1.14 | N/A |
| 16 | 32 | 0.9952±0.0106 | N/A | 1.0000 | N/A | 0.2589 | N/A | 4.01±0.90 | N/A | 3.29±0.78 | N/A |
| 16 | 64 | 0.9972±0.0090 | N/A | 1.0000 | N/A | 0.4527 | N/A | 4.11±15.35 | N/A | 3.59±15.34 | N/A |
| 16 | 128 | 0.9976±0.0071 | N/A | 1.0000 | N/A | 0.3602 | N/A | 2.97±0.48 | N/A | 2.31±0.41 | N/A |
| 32 | 32 | 0.9982±0.0064 | N/A | 1.0000 | N/A | 0.2491 | N/A | 3.28±1.13 | N/A | 2.77±1.04 | N/A |
| 32 | 64 | 0.9994±0.0034 | N/A | 1.0000 | N/A | 0.4409 | N/A | 5.22±14.13 | N/A | 4.64±14.12 | N/A |
| 32 | 128 | 0.9996±0.0028 | N/A | 1.0000 | N/A | 0.5807 | N/A | 3.38±0.99 | N/A | 2.84±0.92 | N/A |

### k = 100

| m | ef | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) | J_Back(ms) | H_Back(ms) |
|---|---|---|---|---|---|---|---|---|---|---|---|
| 8 | 32 | 0.9204±0.0547 | N/A | 1.0000 | N/A | 0.4704 | N/A | 2.66±0.74 | N/A | 2.06±0.67 | N/A |
| 8 | 64 | 0.9361±0.0482 | N/A | 1.0000 | N/A | 0.2520 | N/A | 2.30±0.46 | N/A | 1.75±0.42 | N/A |
| 8 | 128 | 0.9417±0.0481 | N/A | 1.0000 | N/A | 0.3092 | N/A | 3.21±1.19 | N/A | 2.58±1.14 | N/A |
| 16 | 32 | 0.9825±0.0201 | N/A | 1.0000 | N/A | 0.2589 | N/A | 4.01±0.90 | N/A | 3.29±0.78 | N/A |
| 16 | 64 | 0.9880±0.0141 | N/A | 1.0000 | N/A | 0.4527 | N/A | 4.11±15.35 | N/A | 3.59±15.34 | N/A |
| 16 | 128 | 0.9893±0.0131 | N/A | 1.0000 | N/A | 0.3602 | N/A | 2.97±0.48 | N/A | 2.31±0.41 | N/A |
| 32 | 32 | 0.9930±0.0099 | N/A | 1.0000 | N/A | 0.2491 | N/A | 3.28±1.13 | N/A | 2.77±1.04 | N/A |
| 32 | 64 | 0.9969±0.0058 | N/A | 1.0000 | N/A | 0.4409 | N/A | 5.22±14.13 | N/A | 4.64±14.12 | N/A |
| 32 | 128 | 0.9983±0.0040 | N/A | 1.0000 | N/A | 0.5807 | N/A | 3.38±0.99 | N/A | 2.84±0.92 | N/A |


## Scenario: Medium

- **Dimensions**: 128
- **Vector Count**: 100000
- **Queries**: 1000
- **Data Load Time**: 0.0169s
- **Ground Truth Time**: 0.9748s
- **DB Setup Time**: 17.2379s
- **Total Scenario Time**: 1.83 min (109.99s)

### k = 10

| m | ef | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) | J_Back(ms) | H_Back(ms) |
|---|---|---|---|---|---|---|---|---|---|---|---|
| 8 | 32 | 0.8697±0.1680 | N/A | 1.0000 | N/A | 2.1965 | N/A | 3.20±0.91 | N/A | 2.57±0.81 | N/A |
| 8 | 64 | 0.8963±0.1520 | N/A | 1.0000 | N/A | 3.4644 | N/A | 4.44±41.35 | N/A | 2.95±28.58 | N/A |
| 8 | 128 | 0.9137±0.1342 | N/A | 1.0000 | N/A | 4.3792 | N/A | 2.76±0.66 | N/A | 2.20±0.58 | N/A |
| 16 | 32 | 0.9790±0.0531 | N/A | 1.0000 | N/A | 3.7700 | N/A | 3.45±0.76 | N/A | 2.92±0.67 | N/A |
| 16 | 64 | 0.9858±0.0467 | N/A | 1.0000 | N/A | 4.6595 | N/A | 3.53±0.74 | N/A | 3.02±0.65 | N/A |
| 16 | 128 | 0.9890±0.0400 | N/A | 1.0000 | N/A | 6.8958 | N/A | 3.47±0.90 | N/A | 2.96±0.82 | N/A |
| 32 | 32 | 0.9928±0.0321 | N/A | 1.0000 | N/A | 4.1584 | N/A | 4.78±1.01 | N/A | 4.25±0.94 | N/A |
| 32 | 64 | 0.9980±0.0147 | N/A | 1.0000 | N/A | 7.3934 | N/A | 6.68±34.12 | N/A | 6.09±34.12 | N/A |
| 32 | 128 | 0.9969±0.0200 | N/A | 1.0000 | N/A | 11.5433 | N/A | 6.26±33.92 | N/A | 5.69±33.91 | N/A |

### k = 50

| m | ef | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) | J_Back(ms) | H_Back(ms) |
|---|---|---|---|---|---|---|---|---|---|---|---|
| 8 | 32 | 0.8127±0.1492 | N/A | 1.0000 | N/A | 2.1965 | N/A | 3.20±0.91 | N/A | 2.57±0.81 | N/A |
| 8 | 64 | 0.8460±0.1323 | N/A | 1.0000 | N/A | 3.4644 | N/A | 4.44±41.35 | N/A | 2.95±28.58 | N/A |
| 8 | 128 | 0.8623±0.1192 | N/A | 1.0000 | N/A | 4.3792 | N/A | 2.76±0.66 | N/A | 2.20±0.58 | N/A |
| 16 | 32 | 0.9499±0.0593 | N/A | 1.0000 | N/A | 3.7700 | N/A | 3.45±0.76 | N/A | 2.92±0.67 | N/A |
| 16 | 64 | 0.9639±0.0464 | N/A | 1.0000 | N/A | 4.6595 | N/A | 3.53±0.74 | N/A | 3.02±0.65 | N/A |
| 16 | 128 | 0.9687±0.0424 | N/A | 1.0000 | N/A | 6.8958 | N/A | 3.47±0.90 | N/A | 2.96±0.82 | N/A |
| 32 | 32 | 0.9775±0.0345 | N/A | 1.0000 | N/A | 4.1584 | N/A | 4.78±1.01 | N/A | 4.25±0.94 | N/A |
| 32 | 64 | 0.9888±0.0209 | N/A | 1.0000 | N/A | 7.3934 | N/A | 6.68±34.12 | N/A | 6.09±34.12 | N/A |
| 32 | 128 | 0.9888±0.0223 | N/A | 1.0000 | N/A | 11.5433 | N/A | 6.26±33.92 | N/A | 5.69±33.91 | N/A |

### k = 100

| m | ef | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) | J_Back(ms) | H_Back(ms) |
|---|---|---|---|---|---|---|---|---|---|---|---|
| 8 | 32 | 0.7633±0.1450 | N/A | 1.0000 | N/A | 2.1965 | N/A | 3.20±0.91 | N/A | 2.57±0.81 | N/A |
| 8 | 64 | 0.7939±0.1315 | N/A | 1.0000 | N/A | 3.4644 | N/A | 4.44±41.35 | N/A | 2.95±28.58 | N/A |
| 8 | 128 | 0.8113±0.1209 | N/A | 1.0000 | N/A | 4.3792 | N/A | 2.76±0.66 | N/A | 2.20±0.58 | N/A |
| 16 | 32 | 0.9190±0.0675 | N/A | 1.0000 | N/A | 3.7700 | N/A | 3.45±0.76 | N/A | 2.92±0.67 | N/A |
| 16 | 64 | 0.9376±0.0549 | N/A | 1.0000 | N/A | 4.6595 | N/A | 3.53±0.74 | N/A | 3.02±0.65 | N/A |
| 16 | 128 | 0.9421±0.0529 | N/A | 1.0000 | N/A | 6.8958 | N/A | 3.47±0.90 | N/A | 2.96±0.82 | N/A |
| 32 | 32 | 0.9589±0.0417 | N/A | 1.0000 | N/A | 4.1584 | N/A | 4.78±1.01 | N/A | 4.25±0.94 | N/A |
| 32 | 64 | 0.9760±0.0287 | N/A | 1.0000 | N/A | 7.3934 | N/A | 6.68±34.12 | N/A | 6.09±34.12 | N/A |
| 32 | 128 | 0.9760±0.0306 | N/A | 1.0000 | N/A | 11.5433 | N/A | 6.26±33.92 | N/A | 5.69±33.91 | N/A |
