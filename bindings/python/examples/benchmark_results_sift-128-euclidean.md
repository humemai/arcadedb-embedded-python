# Benchmark Results

This benchmark compares ArcadeDB's vector index implementations (JVector vs HNSWLib) across multiple dataset sizes and index parameters.

## Dataset Information

**1. SIFT-128-Euclidean (`sift-128-euclidean.hdf5`)**
*   **File Size:** 501 MB
*   **Total Vectors:** 1,000,000 (1 Million)
*   **Dimensions:** 128
*   **Test Queries:** 10,000

- **Name**: sift-128-euclidean
- **Source**: http://ann-benchmarks.com/sift-128-euclidean.hdf5
- **Metric**: Euclidean
- **K Values**: [10, 50, 100]

## Targets & Use Cases

| k      | Recall target | Hit target | Use case                   |
| ------ | ------------- | ---------- | -------------------------- |
| 10     | 0.85–0.95     | 0.90–0.95  | Small corpora only         |
| **50** | **≥ 0.95**    | **≥ 0.99** | **Default RAG**            |
| 100    | 0.90–0.93     | ≈ 1.0      | Very large / noisy corpora |

As k increases, Recall@k can go down — but Hit@k must go up.

**Note:**
- **Parameter Semantics**: `m` and `ef` are not exactly equivalent between implementations:
  - **JVector**: `m` -> `max_connections`, `ef` -> `beam_width`.
  - **HNSWLib**: `m` -> `m`, `ef` -> `ef`.
- **HNSWLib**: `ef_construction` is fixed at 200. `ef` controls search recall/speed dynamically.
- **Metric Equations**:
  - **Euclidean (JVector)**: Similarity = $1 / (1 + d^2)$ (Higher is better)
  - **Euclidean (HNSWLib)**: Distance = $d^2$ (Lower is better)
  - **Cosine (JVector)**: Distance = $(1 - \cos(\theta)) / 2$ (Lower is better)
  - **Cosine (HNSWLib)**: Distance = $1 - \cos(\theta)$ (Lower is better)

## Scenario: Tiny

- **Dimensions**: 128
- **Vector Count**: 1000
- **Queries**: 10
- **Data Load Time**: 0.0018s
- **Ground Truth Time**: 0.0014s
- **DB Setup Time**: 1.0420s
- **JVector Total Time**: 0.02 min (1.50s)
- **HNSWLib Total Time**: 0.18 min (10.76s)

### k = 10

| m | ef | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) | J_Back(ms) | H_Back(ms) |
|---|---|---|---|---|---|---|---|---|---|---|---|
| 8 | 32 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.3322 | 2.0995 | 6.48±4.30 | 5.11±2.51 | 5.53±4.29 | 4.90±2.49 |
| 8 | 64 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.1641 | 1.1693 | 1.99±0.39 | 3.69±0.57 | 1.46±0.31 | 3.45±0.55 |
| 8 | 128 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.1817 | 1.1660 | 2.72±0.51 | 4.96±3.63 | 2.03±0.49 | 4.78±3.61 |
| 16 | 32 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0751 | 0.7954 | 2.69±0.56 | 1.79±0.08 | 2.08±0.53 | 1.61±0.08 |
| 16 | 64 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0600 | 0.9075 | 2.77±1.08 | 2.30±0.57 | 2.12±1.02 | 2.08±0.54 |
| 16 | 128 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0746 | 0.9146 | 2.18±0.39 | 2.34±0.86 | 1.63±0.37 | 2.16±0.86 |
| 32 | 32 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0605 | 0.9040 | 2.99±0.50 | 2.47±0.20 | 2.32±0.47 | 2.22±0.19 |
| 32 | 64 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0472 | 0.9817 | 2.43±0.07 | 4.08±1.70 | 1.81±0.06 | 3.87±1.70 |
| 32 | 128 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0672 | 1.3549 | 3.65±1.90 | 1.59±0.15 | 3.06±1.87 | 1.46±0.14 |

### k = 50

| m | ef | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) | J_Back(ms) | H_Back(ms) |
|---|---|---|---|---|---|---|---|---|---|---|---|
| 8 | 32 | 0.9980±0.0060 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.3322 | 2.0995 | 6.48±4.30 | 5.11±2.51 | 5.53±4.29 | 4.90±2.49 |
| 8 | 64 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.1641 | 1.1693 | 1.99±0.39 | 3.69±0.57 | 1.46±0.31 | 3.45±0.55 |
| 8 | 128 | 0.9960±0.0080 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.1817 | 1.1660 | 2.72±0.51 | 4.96±3.63 | 2.03±0.49 | 4.78±3.61 |
| 16 | 32 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0751 | 0.7954 | 2.69±0.56 | 1.79±0.08 | 2.08±0.53 | 1.61±0.08 |
| 16 | 64 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0600 | 0.9075 | 2.77±1.08 | 2.30±0.57 | 2.12±1.02 | 2.08±0.54 |
| 16 | 128 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0746 | 0.9146 | 2.18±0.39 | 2.34±0.86 | 1.63±0.37 | 2.16±0.86 |
| 32 | 32 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0605 | 0.9040 | 2.99±0.50 | 2.47±0.20 | 2.32±0.47 | 2.22±0.19 |
| 32 | 64 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0472 | 0.9817 | 2.43±0.07 | 4.08±1.70 | 1.81±0.06 | 3.87±1.70 |
| 32 | 128 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0672 | 1.3549 | 3.65±1.90 | 1.59±0.15 | 3.06±1.87 | 1.46±0.14 |

### k = 100

| m | ef | J_Recall (Avg±Std) | H_Recall (Avg±Std) | J_Hit (Avg) | H_Hit (Avg) | J_Build(s) | H_Build(s) | J_Lat(ms) | H_Lat(ms) | J_Back(ms) | H_Back(ms) |
|---|---|---|---|---|---|---|---|---|---|---|---|
| 8 | 32 | 0.9890±0.0094 | 0.9980±0.0060 | 1.0000 | 1.0000 | 0.3322 | 2.0995 | 6.48±4.30 | 5.11±2.51 | 5.53±4.29 | 4.90±2.49 |
| 8 | 64 | 0.9970±0.0046 | 0.9980±0.0060 | 1.0000 | 1.0000 | 0.1641 | 1.1693 | 1.99±0.39 | 3.69±0.57 | 1.46±0.31 | 3.45±0.55 |
| 8 | 128 | 0.9930±0.0078 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.1817 | 1.1660 | 2.72±0.51 | 4.96±3.63 | 2.03±0.49 | 4.78±3.61 |
| 16 | 32 | 0.9990±0.0030 | 0.9990±0.0030 | 1.0000 | 1.0000 | 0.0751 | 0.7954 | 2.69±0.56 | 1.79±0.08 | 2.08±0.53 | 1.61±0.08 |
| 16 | 64 | 0.9990±0.0030 | 0.9990±0.0030 | 1.0000 | 1.0000 | 0.0600 | 0.9075 | 2.77±1.08 | 2.30±0.57 | 2.12±1.02 | 2.08±0.54 |
| 16 | 128 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0746 | 0.9146 | 2.18±0.39 | 2.34±0.86 | 1.63±0.37 | 2.16±0.86 |
| 32 | 32 | 1.0000±0.0000 | 0.9990±0.0030 | 1.0000 | 1.0000 | 0.0605 | 0.9040 | 2.99±0.50 | 2.47±0.20 | 2.32±0.47 | 2.22±0.19 |
| 32 | 64 | 1.0000±0.0000 | 0.9990±0.0030 | 1.0000 | 1.0000 | 0.0472 | 0.9817 | 2.43±0.07 | 4.08±1.70 | 1.81±0.06 | 3.87±1.70 |
| 32 | 128 | 1.0000±0.0000 | 1.0000±0.0000 | 1.0000 | 1.0000 | 0.0672 | 1.3549 | 3.65±1.90 | 1.59±0.15 | 3.06±1.87 | 1.46±0.14 |
